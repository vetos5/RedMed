<template>
    <lightning-button label="Add Order Item" onclick={handleAddOrderItem}></lightning-button>
    <div>
        <div>
            <p>Discount: 
                <lightning-input 
                    type="number" 
                    value={orderDiscount} 
                    onchange={handleOrderDiscountChange} 
                    max="99"
                    message-when-range-overflow="Discount cannot exceed 99%">
                </lightning-input>
            </p>
            <p>Total Amount: {totalAmount}</p>
        </div>
    </div>

    <template for:each={orderItems} for:item="item" for:index="index">
        <div key={item.deviceId}> 
            <lightning-combobox 
                label="Device" 
                data-index={index} 
                value={item.deviceId} 
                options={availableDevices} 
                onchange={handleDeviceChange}>
            </lightning-combobox>
            <lightning-input 
                type="number" 
                label="Discount" 
                data-index={index} 
                value={item.discount} 
                onchange={handleDiscountChange}
                max="99"
                message-when-range-overflow="Discount cannot exceed 99%">
            </lightning-input>
            <p>Amount: {item.amount}</p>
        </div>
    </template>

    <lightning-button label="Create Orders and Items" onclick={handleCreateOrder}></lightning-button>
    <lightning-button label="Cancel" onclick={handleCancel}></lightning-button>
</template>
